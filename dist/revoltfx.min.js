var revolt=function(t,e,n){"use strict";function i(t){var e=Object.create(null);return t&&Object.keys(t).forEach((function(n){if("default"!==n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}})),e.default=t,Object.freeze(e)}var r=i(n);function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,a,s,o=[],c=!0,l=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=a.call(n)).done)&&(o.push(i.value),o.length!==e);c=!0);}catch(t){l=!0,r=t}finally{try{if(!c&&null!=n.return&&(s=n.return(),Object(s)!==s))return}finally{if(l)throw r}}return o}}(t,e)||function(t,e){if(t){if("string"==typeof t)return a(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}function l(t){var e=function(t,e){if("object"!=c(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=c(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==c(e)?e:String(e)}function h(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,l(i.key),i)}}function u(t,e,n){return e&&h(t.prototype,e),n&&h(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function f(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var p={exports:{}},d={exports:{}};!function(t){function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports}(d);var _=d.exports;!function(t){var e=_.default;function n(){
/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */
t.exports=n=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var i,r={},a=Object.prototype,s=a.hasOwnProperty,o=Object.defineProperty||function(t,e,n){t[e]=n.value},c="function"==typeof Symbol?Symbol:{},l=c.iterator||"@@iterator",h=c.asyncIterator||"@@asyncIterator",u=c.toStringTag||"@@toStringTag";function f(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(i){f=function(t,e,n){return t[e]=n}}function p(t,e,n,i){var r=e&&e.prototype instanceof x?e:x,a=Object.create(r.prototype),s=new T(i||[]);return o(a,"_invoke",{value:I(t,n,s)}),a}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}r.wrap=p;var _="suspendedStart",v="suspendedYield",y="executing",m="completed",g={};function x(){}function b(){}function w(){}var S={};f(S,l,(function(){return this}));var E=Object.getPrototypeOf,M=E&&E(E(D([])));M&&M!==a&&s.call(M,l)&&(S=M);var k=w.prototype=x.prototype=Object.create(S);function C(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,n){function i(r,a,o,c){var l=d(t[r],t,a);if("throw"!==l.type){var h=l.arg,u=h.value;return u&&"object"==e(u)&&s.call(u,"__await")?n.resolve(u.__await).then((function(t){i("next",t,o,c)}),(function(t){i("throw",t,o,c)})):n.resolve(u).then((function(t){h.value=t,o(h)}),(function(t){return i("throw",t,o,c)}))}c(l.arg)}var r;o(this,"_invoke",{value:function(t,e){function a(){return new n((function(n,r){i(t,e,n,r)}))}return r=r?r.then(a,a):a()}})}function I(t,e,n){var r=_;return function(a,s){if(r===y)throw new Error("Generator is already running");if(r===m){if("throw"===a)throw s;return{value:i,done:!0}}for(n.method=a,n.arg=s;;){var o=n.delegate;if(o){var c=R(o,n);if(c){if(c===g)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===_)throw r=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=y;var l=d(t,e,n);if("normal"===l.type){if(r=n.done?m:v,l.arg===g)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r=m,n.method="throw",n.arg=l.arg)}}}function R(t,e){var n=e.method,r=t.iterator[n];if(r===i)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=i,R(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),g;var a=d(r,t.iterator,e.arg);if("throw"===a.type)return e.method="throw",e.arg=a.arg,e.delegate=null,g;var s=a.arg;return s?s.done?(e[t.resultName]=s.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=i),e.delegate=null,g):s:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,g)}function P(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function A(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function T(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(P,this),this.reset(!0)}function D(t){if(t||""===t){var n=t[l];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,a=function e(){for(;++r<t.length;)if(s.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=i,e.done=!0,e};return a.next=a}}throw new TypeError(e(t)+" is not iterable")}return b.prototype=w,o(k,"constructor",{value:w,configurable:!0}),o(w,"constructor",{value:b,configurable:!0}),b.displayName=f(w,u,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===b||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,f(t,u,"GeneratorFunction")),t.prototype=Object.create(k),t},r.awrap=function(t){return{__await:t}},C(O.prototype),f(O.prototype,h,(function(){return this})),r.AsyncIterator=O,r.async=function(t,e,n,i,a){void 0===a&&(a=Promise);var s=new O(p(t,e,n,i),a);return r.isGeneratorFunction(e)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},C(k),f(k,u,"Generator"),f(k,l,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),n=[];for(var i in e)n.push(i);return n.reverse(),function t(){for(;n.length;){var i=n.pop();if(i in e)return t.value=i,t.done=!1,t}return t.done=!0,t}},r.values=D,T.prototype={constructor:T,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=i,this.done=!1,this.delegate=null,this.method="next",this.arg=i,this.tryEntries.forEach(A),!t)for(var e in this)"t"===e.charAt(0)&&s.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=i)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(n,r){return o.type="throw",o.arg=t,e.next=n,r&&(e.method="next",e.arg=i),!!r}for(var r=this.tryEntries.length-1;r>=0;--r){var a=this.tryEntries[r],o=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var c=s.call(a,"catchLoc"),l=s.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&s.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===t||"continue"===t)&&r.tryLoc<=e&&e<=r.finallyLoc&&(r=null);var a=r?r.completion:{};return a.type=t,a.arg=e,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),g},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),A(n),g}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var i=n.completion;if("throw"===i.type){var r=i.arg;A(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:D(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=i),g}},r}t.exports=n,t.exports.__esModule=!0,t.exports.default=t.exports}(p);var v=(0,p.exports)(),y=v;try{regeneratorRuntime=v}catch(t){"object"===("undefined"==typeof globalThis?"undefined":c(globalThis))?globalThis.regeneratorRuntime=v:Function("r","regeneratorRuntime = r")(v)}var m,g=f(y),x=/iPhone/i,b=/iPod/i,w=/iPad/i,S=/\biOS-universal(?:.+)Mac\b/i,E=/\bAndroid(?:.+)Mobile\b/i,M=/Android/i,k=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,C=/Silk/i,O=/Windows Phone/i,I=/\bWindows(?:.+)ARM\b/i,R=/BlackBerry/i,P=/BB10/i,A=/Opera Mini/i,T=/\b(CriOS|Chrome)(?:.+)Mobile/i,D=/Mobile(?:.+)Firefox\b/i,N=function(t){return void 0!==t&&"MacIntel"===t.platform&&"number"==typeof t.maxTouchPoints&&t.maxTouchPoints>1&&"undefined"==typeof MSStream};function B(t){var e={userAgent:"",platform:"",maxTouchPoints:0};t||"undefined"==typeof navigator?"string"==typeof t?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0}):e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0};var n=e.userAgent,i=n.split("[FBAN");void 0!==i[1]&&(n=i[0]),void 0!==(i=n.split("Twitter"))[1]&&(n=i[0]);var r=function(t){return function(e){return e.test(t)}}(n),a={apple:{phone:r(x)&&!r(O),ipod:r(b),tablet:!r(x)&&(r(w)||N(e))&&!r(O),universal:r(S),device:(r(x)||r(b)||r(w)||r(S)||N(e))&&!r(O)},amazon:{phone:r(k),tablet:!r(k)&&r(C),device:r(k)||r(C)},android:{phone:!r(O)&&r(k)||!r(O)&&r(E),tablet:!r(O)&&!r(k)&&!r(E)&&(r(C)||r(M)),device:!r(O)&&(r(k)||r(C)||r(E)||r(M))||r(/\bokhttp\b/i)},windows:{phone:r(O),tablet:r(I),device:r(O)||r(I)},other:{blackberry:r(R),blackberry10:r(P),opera:r(A),firefox:r(D),chrome:r(T),device:r(R)||r(P)||r(A)||r(D)||r(T)},any:!1,phone:!1,tablet:!1};return a.any=a.apple.device||a.android.device||a.windows.device||a.other.device,a.phone=a.apple.phone||a.android.phone||a.windows.phone,a.tablet=a.apple.tablet||a.android.tablet||a.windows.tablet,a}(null!==(m=B.default)&&void 0!==m?m:B)(globalThis.navigator);!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function a(t,e,i,a,s){if("function"!=typeof i)throw new TypeError("The listener must be a function");var o=new r(i,a||t,s),c=n?n+e:e;return t._events[c]?t._events[c].fn?t._events[c]=[t._events[c],o]:t._events[c].push(o):(t._events[c]=o,t._eventsCount++),t}function s(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function o(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),o.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},o.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,a=i.length,s=new Array(a);r<a;r++)s[r]=i[r].fn;return s},o.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},o.prototype.emit=function(t,e,i,r,a,s){var o=n?n+t:t;if(!this._events[o])return!1;var c,l,h=this._events[o],u=arguments.length;if(h.fn){switch(h.once&&this.removeListener(t,h.fn,void 0,!0),u){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,e),!0;case 3:return h.fn.call(h.context,e,i),!0;case 4:return h.fn.call(h.context,e,i,r),!0;case 5:return h.fn.call(h.context,e,i,r,a),!0;case 6:return h.fn.call(h.context,e,i,r,a,s),!0}for(l=1,c=new Array(u-1);l<u;l++)c[l-1]=arguments[l];h.fn.apply(h.context,c)}else{var f,p=h.length;for(l=0;l<p;l++)switch(h[l].once&&this.removeListener(t,h[l].fn,void 0,!0),u){case 1:h[l].fn.call(h[l].context);break;case 2:h[l].fn.call(h[l].context,e);break;case 3:h[l].fn.call(h[l].context,e,i);break;case 4:h[l].fn.call(h[l].context,e,i,r);break;default:if(!c)for(f=1,c=new Array(u-1);f<u;f++)c[f-1]=arguments[f];h[l].fn.apply(h[l].context,c)}}return!0},o.prototype.on=function(t,e,n){return a(this,t,e,n,!1)},o.prototype.once=function(t,e,n){return a(this,t,e,n,!0)},o.prototype.removeListener=function(t,e,i,r){var a=n?n+t:t;if(!this._events[a])return this;if(!e)return s(this,a),this;var o=this._events[a];if(o.fn)o.fn!==e||r&&!o.once||i&&o.context!==i||s(this,a);else{for(var c=0,l=[],h=o.length;c<h;c++)(o[c].fn!==e||r&&!o[c].once||i&&o[c].context!==i)&&l.push(o[c]);l.length?this._events[a]=1===l.length?l[0]:l:s(this,a)}return this},o.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&s(this,e)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,t.exports=o}({exports:{}});var j={exports:{}};function L(t,e,n){n=n||2;var i,r,a,s,o,c,l,h=e&&e.length,u=h?e[0]*n:t.length,f=Y(t,0,u,n,!0),p=[];if(!f||f.next===f.prev)return p;if(h&&(f=function(t,e,n,i){var r,a,s,o=[];for(r=0,a=e.length;r<a;r++)(s=Y(t,e[r]*i,r<a-1?e[r+1]*i:t.length,i,!1))===s.next&&(s.steiner=!0),o.push($(s));for(o.sort(Z),r=0;r<o.length;r++)n=z(o[r],n);return n}(t,e,f,n)),t.length>80*n){i=a=t[0],r=s=t[1];for(var d=n;d<u;d+=n)(o=t[d])<i&&(i=o),(c=t[d+1])<r&&(r=c),o>a&&(a=o),c>s&&(s=c);l=0!==(l=Math.max(a-i,s-r))?32767/l:0}return X(f,p,n,i,r,l,0),p}function Y(t,e,n,i,r){var a,s;if(r===lt(t,e,n,i)>0)for(a=e;a<n;a+=i)s=st(a,t[a],t[a+1],s);else for(a=n-i;a>=e;a-=i)s=st(a,t[a],t[a+1],s);return s&&tt(s,s.next)&&(ot(s),s=s.next),s}function q(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!tt(i,i.next)&&0!==W(i.prev,i,i.next))i=i.next;else{if(ot(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function X(t,e,n,i,r,a,s){if(t){!s&&a&&function(t,e,n,i){var r=t;do{0===r.z&&(r.z=Q(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,function(t){var e,n,i,r,a,s,o,c,l=1;do{for(n=t,t=null,a=null,s=0;n;){for(s++,i=n,o=0,e=0;e<l&&(o++,i=i.nextZ);e++);for(c=l;o>0||c>0&&i;)0!==o&&(0===c||!i||n.z<=i.z)?(r=n,n=n.nextZ,o--):(r=i,i=i.nextZ,c--),a?a.nextZ=r:t=r,r.prevZ=a,a=r;n=i}a.nextZ=null,l*=2}while(s>1)}(r)}(t,i,r,a);for(var o,c,l=t;t.prev!==t.next;)if(o=t.prev,c=t.next,a?U(t,i,r,a):F(t))e.push(o.i/n|0),e.push(t.i/n|0),e.push(c.i/n|0),ot(t),t=c.next,l=c.next;else if((t=c)===l){s?1===s?X(t=H(q(t),e,n),e,n,i,r,a,2):2===s&&G(t,e,n,i,r,a):X(q(t),e,n,i,r,a,1);break}}}function F(t){var e=t.prev,n=t,i=t.next;if(W(e,n,i)>=0)return!1;for(var r=e.x,a=n.x,s=i.x,o=e.y,c=n.y,l=i.y,h=r<a?r<s?r:s:a<s?a:s,u=o<c?o<l?o:l:c<l?c:l,f=r>a?r>s?r:s:a>s?a:s,p=o>c?o>l?o:l:c>l?c:l,d=i.next;d!==e;){if(d.x>=h&&d.x<=f&&d.y>=u&&d.y<=p&&J(r,o,a,c,s,l,d.x,d.y)&&W(d.prev,d,d.next)>=0)return!1;d=d.next}return!0}function U(t,e,n,i){var r=t.prev,a=t,s=t.next;if(W(r,a,s)>=0)return!1;for(var o=r.x,c=a.x,l=s.x,h=r.y,u=a.y,f=s.y,p=o<c?o<l?o:l:c<l?c:l,d=h<u?h<f?h:f:u<f?u:f,_=o>c?o>l?o:l:c>l?c:l,v=h>u?h>f?h:f:u>f?u:f,y=Q(p,d,e,n,i),m=Q(_,v,e,n,i),g=t.prevZ,x=t.nextZ;g&&g.z>=y&&x&&x.z<=m;){if(g.x>=p&&g.x<=_&&g.y>=d&&g.y<=v&&g!==r&&g!==s&&J(o,h,c,u,l,f,g.x,g.y)&&W(g.prev,g,g.next)>=0)return!1;if(g=g.prevZ,x.x>=p&&x.x<=_&&x.y>=d&&x.y<=v&&x!==r&&x!==s&&J(o,h,c,u,l,f,x.x,x.y)&&W(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;g&&g.z>=y;){if(g.x>=p&&g.x<=_&&g.y>=d&&g.y<=v&&g!==r&&g!==s&&J(o,h,c,u,l,f,g.x,g.y)&&W(g.prev,g,g.next)>=0)return!1;g=g.prevZ}for(;x&&x.z<=m;){if(x.x>=p&&x.x<=_&&x.y>=d&&x.y<=v&&x!==r&&x!==s&&J(o,h,c,u,l,f,x.x,x.y)&&W(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function H(t,e,n){var i=t;do{var r=i.prev,a=i.next.next;!tt(r,a)&&et(r,i,i.next,a)&&rt(r,a)&&rt(a,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(a.i/n|0),ot(i),ot(i.next),i=t=a),i=i.next}while(i!==t);return q(i)}function G(t,e,n,i,r,a){var s=t;do{for(var o=s.next.next;o!==s.prev;){if(s.i!==o.i&&K(s,o)){var c=at(s,o);return s=q(s,s.next),c=q(c,c.next),X(s,e,n,i,r,a,0),void X(c,e,n,i,r,a,0)}o=o.next}s=s.next}while(s!==t)}function Z(t,e){return t.x-e.x}function z(t,e){var n=function(t,e){var n,i=e,r=t.x,a=t.y,s=-1/0;do{if(a<=i.y&&a>=i.next.y&&i.next.y!==i.y){var o=i.x+(a-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(o<=r&&o>s&&(s=o,n=i.x<i.next.x?i:i.next,o===r))return n}i=i.next}while(i!==e);if(!n)return null;var c,l=n,h=n.x,u=n.y,f=1/0;i=n;do{r>=i.x&&i.x>=h&&r!==i.x&&J(a<u?r:s,a,h,u,a<u?s:r,a,i.x,i.y)&&(c=Math.abs(a-i.y)/(r-i.x),rt(i,t)&&(c<f||c===f&&(i.x>n.x||i.x===n.x&&V(n,i)))&&(n=i,f=c)),i=i.next}while(i!==l);return n}(t,e);if(!n)return e;var i=at(n,t);return q(i,i.next),q(n,n.next)}function V(t,e){return W(t.prev,t,e.prev)<0&&W(e.next,t,t.next)<0}function Q(t,e,n,i,r){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*r|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-i)*r|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function $(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function J(t,e,n,i,r,a,s,o){return(r-s)*(e-o)>=(t-s)*(a-o)&&(t-s)*(i-o)>=(n-s)*(e-o)&&(n-s)*(a-o)>=(r-s)*(i-o)}function K(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&et(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(rt(t,e)&&rt(e,t)&&function(t,e){var n=t,i=!1,r=(t.x+e.x)/2,a=(t.y+e.y)/2;do{n.y>a!=n.next.y>a&&n.next.y!==n.y&&r<(n.next.x-n.x)*(a-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}(t,e)&&(W(t.prev,t,e.prev)||W(t,e.prev,e))||tt(t,e)&&W(t.prev,t,t.next)>0&&W(e.prev,e,e.next)>0)}function W(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function tt(t,e){return t.x===e.x&&t.y===e.y}function et(t,e,n,i){var r=it(W(t,e,n)),a=it(W(t,e,i)),s=it(W(n,i,t)),o=it(W(n,i,e));return r!==a&&s!==o||(!(0!==r||!nt(t,n,e))||(!(0!==a||!nt(t,i,e))||(!(0!==s||!nt(n,t,i))||!(0!==o||!nt(n,e,i)))))}function nt(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function it(t){return t>0?1:t<0?-1:0}function rt(t,e){return W(t.prev,t,t.next)<0?W(t,e,t.next)>=0&&W(t,t.prev,e)>=0:W(t,e,t.prev)<0||W(t,t.next,e)<0}function at(t,e){var n=new ct(t.i,t.x,t.y),i=new ct(e.i,e.x,e.y),r=t.next,a=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,a.next=i,i.prev=a,i}function st(t,e,n,i){var r=new ct(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function ot(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function ct(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lt(t,e,n,i){for(var r=0,a=e,s=n-i;a<n;a+=i)r+=(t[s]-t[a])*(t[a+1]+t[s+1]),s=a;return r}j.exports=L,j.exports.default=L,L.deviation=function(t,e,n,i){var r=e&&e.length,a=r?e[0]*n:t.length,s=Math.abs(lt(t,0,a,n));if(r)for(var o=0,c=e.length;o<c;o++){var l=e[o]*n,h=o<c-1?e[o+1]*n:t.length;s-=Math.abs(lt(t,l,h,n))}var u=0;for(o=0;o<i.length;o+=3){var f=i[o]*n,p=i[o+1]*n,d=i[o+2]*n;u+=Math.abs((t[f]-t[d])*(t[p+1]-t[f+1])-(t[f]-t[p])*(t[d+1]-t[f+1]))}return 0===s&&0===u?0:Math.abs((u-s)/s)},L.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var a=0;a<t[r].length;a++)for(var s=0;s<e;s++)n.vertices.push(t[r][a][s]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n};var ht=function(t){return t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t}(ht||{});var ut={grad:.9,turn:360,rad:360/(2*Math.PI)},ft=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},pt=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=Math.pow(10,e)),Math.round(n*t)/n+0},dt=function(t,e,n){return void 0===e&&(e=0),void 0===n&&(n=1),t>n?n:t>e?t:e},_t=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},vt=function(t){return{r:dt(t.r,0,255),g:dt(t.g,0,255),b:dt(t.b,0,255),a:dt(t.a)}},yt=function(t){return{r:pt(t.r),g:pt(t.g),b:pt(t.b),a:pt(t.a,3)}},mt=/^#([0-9a-f]{3,8})$/i,gt=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},xt=function(t){var e=t.r,n=t.g,i=t.b,r=t.a,a=Math.max(e,n,i),s=a-Math.min(e,n,i),o=s?a===e?(n-i)/s:a===n?2+(i-e)/s:4+(e-n)/s:0;return{h:60*(o<0?o+6:o),s:a?s/a*100:0,v:a/255*100,a:r}},bt=function(t){var e=t.h,n=t.s,i=t.v,r=t.a;e=e/360*6,n/=100,i/=100;var a=Math.floor(e),s=i*(1-n),o=i*(1-(e-a)*n),c=i*(1-(1-e+a)*n),l=a%6;return{r:255*[i,o,s,s,c,i][l],g:255*[c,i,i,o,s,s][l],b:255*[s,s,c,i,i,o][l],a:r}},wt=function(t){return{h:_t(t.h),s:dt(t.s,0,100),l:dt(t.l,0,100),a:dt(t.a)}},St=function(t){return{h:pt(t.h),s:pt(t.s),l:pt(t.l),a:pt(t.a,3)}},Et=function(t){return bt((n=(e=t).s,{h:e.h,s:(n*=((i=e.l)<50?i:100-i)/100)>0?2*n/(i+n)*100:0,v:i+n,a:e.a}));var e,n,i},Mt=function(t){return{h:(e=xt(t)).h,s:(r=(200-(n=e.s))*(i=e.v)/100)>0&&r<200?n*i/100/(r<=100?r:200-r)*100:0,l:r/2,a:e.a};var e,n,i,r},kt=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ct=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Ot=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,It=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,Rt={string:[[function(t){var e=mt.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?pt(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?pt(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=Ot.exec(t)||It.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:vt({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=kt.exec(t)||Ct.exec(t);if(!e)return null;var n,i,r=wt({h:(n=e[1],i=e[2],void 0===i&&(i="deg"),Number(n)*(ut[i]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return Et(r)},"hsl"]],object:[[function(t){var e=t.r,n=t.g,i=t.b,r=t.a,a=void 0===r?1:r;return ft(e)&&ft(n)&&ft(i)?vt({r:Number(e),g:Number(n),b:Number(i),a:Number(a)}):null},"rgb"],[function(t){var e=t.h,n=t.s,i=t.l,r=t.a,a=void 0===r?1:r;if(!ft(e)||!ft(n)||!ft(i))return null;var s=wt({h:Number(e),s:Number(n),l:Number(i),a:Number(a)});return Et(s)},"hsl"],[function(t){var e=t.h,n=t.s,i=t.v,r=t.a,a=void 0===r?1:r;if(!ft(e)||!ft(n)||!ft(i))return null;var s=function(t){return{h:_t(t.h),s:dt(t.s,0,100),v:dt(t.v,0,100),a:dt(t.a)}}({h:Number(e),s:Number(n),v:Number(i),a:Number(a)});return bt(s)},"hsv"]]},Pt=function(t,e){for(var n=0;n<e.length;n++){var i=e[n][0](t);if(i)return[i,e[n][1]]}return[null,void 0]},At=function(t,e){var n=Mt(t);return{h:n.h,s:dt(n.s+100*e,0,100),l:n.l,a:n.a}},Tt=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Dt=function(t,e){var n=Mt(t);return{h:n.h,s:n.s,l:dt(n.l+100*e,0,100),a:n.a}},Nt=function(){function t(t){this.parsed=function(t){return"string"==typeof t?Pt(t.trim(),Rt.string):"object"==c(t)&&null!==t?Pt(t,Rt.object):[null,void 0]}(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return pt(Tt(this.rgba),2)},t.prototype.isDark=function(){return Tt(this.rgba)<.5},t.prototype.isLight=function(){return Tt(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=yt(this.rgba)).r,n=t.g,i=t.b,a=(r=t.a)<1?gt(pt(255*r)):"","#"+gt(e)+gt(n)+gt(i)+a;var t,e,n,i,r,a},t.prototype.toRgb=function(){return yt(this.rgba)},t.prototype.toRgbString=function(){return e=(t=yt(this.rgba)).r,n=t.g,i=t.b,(r=t.a)<1?"rgba("+e+", "+n+", "+i+", "+r+")":"rgb("+e+", "+n+", "+i+")";var t,e,n,i,r},t.prototype.toHsl=function(){return St(Mt(this.rgba))},t.prototype.toHslString=function(){return e=(t=St(Mt(this.rgba))).h,n=t.s,i=t.l,(r=t.a)<1?"hsla("+e+", "+n+"%, "+i+"%, "+r+")":"hsl("+e+", "+n+"%, "+i+"%)";var t,e,n,i,r},t.prototype.toHsv=function(){return t=xt(this.rgba),{h:pt(t.h),s:pt(t.s),v:pt(t.v),a:pt(t.a,3)};var t},t.prototype.invert=function(){return Bt({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),Bt(At(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),Bt(At(this.rgba,-t))},t.prototype.grayscale=function(){return Bt(At(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),Bt(Dt(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),Bt(Dt(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?Bt({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):pt(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=Mt(this.rgba);return"number"==typeof t?Bt({h:t,s:e.s,l:e.l,a:e.a}):pt(e.h)},t.prototype.isEqual=function(t){return this.toHex()===Bt(t).toHex()},t}(),Bt=function(t){return t instanceof Nt?t:new Nt(t)},jt=[];function Lt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}!function(t){t.forEach((function(t){jt.indexOf(t)<0&&(t(Nt,Rt),jt.push(t))}))}([function(t,e){var n={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},i={};for(var r in n)i[n[r]]=r;var a={};t.prototype.toName=function(e){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var r,s,o=i[this.toHex()];if(o)return o;if(null==e?void 0:e.closest){var c=this.toRgb(),l=1/0,h="black";if(!a.length)for(var u in n)a[u]=new t(n[u]).toRgb();for(var f in n){var p=(r=c,s=a[f],Math.pow(r.r-s.r,2)+Math.pow(r.g-s.g,2)+Math.pow(r.b-s.b,2));p<l&&(l=p,h=f)}return h}},e.string.push([function(e){var i=e.toLowerCase(),r="transparent"===i?"#0000":n[i];return r?new t(r).toRgb():null},"name"])}]);var Yt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215;o(this,t),this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=e}return u(t,[{key:"red",get:function(){return this._components[0]}},{key:"green",get:function(){return this._components[1]}},{key:"blue",get:function(){return this._components[2]}},{key:"alpha",get:function(){return this._components[3]}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"value",get:function(){return this._value},set:function(e){if(e instanceof t)this._value=this.cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(null===e)throw new Error("Cannot set PIXI.Color#value to null");(null===this._value||!this.isSourceEqual(this._value,e))&&(this.normalize(e),this._value=this.cloneSource(e))}}},{key:"cloneSource",value:function(t){return"string"==typeof t||"number"==typeof t||t instanceof Number||null===t?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):"object"==c(t)&&null!==t?function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Lt(Object(n),!0).forEach((function(e){var i,r,a;i=t,r=e,a=n[e],(r=l(r))in i?Object.defineProperty(i,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[r]=a})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Lt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t):t}},{key:"isSourceEqual",value:function(t,e){var n=c(t);if(n!==c(e))return!1;if("number"===n||"string"===n||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length===e.length&&t.every((function(t,n){return t===e[n]}));if(null!==t&&null!==e){var i=Object.keys(t),r=Object.keys(e);return i.length===r.length&&i.every((function(n){return t[n]===e[n]}))}return t===e}},{key:"toRgba",value:function(){var t=s(this._components,4);return{r:t[0],g:t[1],b:t[2],a:t[3]}}},{key:"toRgb",value:function(){var t=s(this._components,3);return{r:t[0],g:t[1],b:t[2]}}},{key:"toRgbaString",value:function(){var t=s(this.toUint8RgbArray(),3),e=t[0],n=t[1],i=t[2];return"rgba(".concat(e,",").concat(n,",").concat(i,",").concat(this.alpha,")")}},{key:"toUint8RgbArray",value:function(t){var e,n=s(this._components,3),i=n[0],r=n[1],a=n[2];return(t=null!==(e=t)&&void 0!==e?e:[])[0]=Math.round(255*i),t[1]=Math.round(255*r),t[2]=Math.round(255*a),t}},{key:"toRgbArray",value:function(t){var e;t=null!==(e=t)&&void 0!==e?e:[];var n=s(this._components,3),i=n[0],r=n[1],a=n[2];return t[0]=i,t[1]=r,t[2]=a,t}},{key:"toNumber",value:function(){return this._int}},{key:"toLittleEndianNumber",value:function(){var t=this._int;return(t>>16)+(65280&t)+((255&t)<<16)}},{key:"multiply",value:function(e){var n=s(t.temp.setValue(e)._components,4),i=n[0],r=n[1],a=n[2],o=n[3];return this._components[0]*=i,this._components[1]*=r,this._components[2]*=a,this._components[3]*=o,this.refreshInt(),this._value=null,this}},{key:"premultiply",value:function(t){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}},{key:"toPremultiplied",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(1===t)return(255<<24)+this._int;if(0===t)return e?0:this._int;var n=this._int>>16&255,i=this._int>>8&255,r=255&this._int;return e&&(n=n*t+.5|0,i=i*t+.5|0,r=r*t+.5|0),(255*t<<24)+(n<<16)+(i<<8)+r}},{key:"toHex",value:function(){var t=this._int.toString(16);return"#".concat("000000".substring(0,6-t.length)+t)}},{key:"toHexa",value:function(){var t=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}},{key:"setAlpha",value:function(t){return this._components[3]=this._clamp(t),this}},{key:"round",value:function(t){var e=s(this._components,3),n=e[0],i=e[1],r=e[2];return this._components[0]=Math.round(n*t)/t,this._components[1]=Math.round(i*t)/t,this._components[2]=Math.round(r*t)/t,this.refreshInt(),this._value=null,this}},{key:"toArray",value:function(t){var e;t=null!==(e=t)&&void 0!==e?e:[];var n=s(this._components,4),i=n[0],r=n[1],a=n[2],o=n[3];return t[0]=i,t[1]=r,t[2]=a,t[3]=o,t}},{key:"normalize",value:function(e){var n,i,r,a,o,l,h,u;if(("number"==typeof e||e instanceof Number)&&e>=0&&e<=16777215){o=(e>>16&255)/255,l=(e>>8&255)/255,h=(255&e)/255,u=1}else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)o=(n=s(e=this._clamp(e),4))[0],l=n[1],h=n[2],u=void 0===(i=n[3])?1:i;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)o=(r=s(e=this._clamp(e,0,255),4))[0],l=r[1],h=r[2],u=void 0===(a=r[3])?255:a,o/=255,l/=255,h/=255,u/=255;else if("string"==typeof e||"object"==c(e)){var f;if("string"==typeof e){var p=t.HEX_PATTERN.exec(e);p&&(e="#".concat(p[2]))}var d=Bt(e);d.isValid()&&(o=(f=d.rgba).r,l=f.g,h=f.b,u=f.a,o/=255,l/=255,h/=255)}if(void 0===o)throw new Error("Unable to convert color ".concat(e));this._components[0]=o,this._components[1]=l,this._components[2]=h,this._components[3]=u,this.refreshInt()}},{key:"refreshInt",value:function(){this._clamp(this._components);var t=s(this._components,3),e=t[0],n=t[1],i=t[2];this._int=(255*e<<16)+(255*n<<8)+(255*i|0)}},{key:"_clamp",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return"number"==typeof t?Math.min(Math.max(t,e),n):(t.forEach((function(i,r){t[r]=Math.min(Math.max(i,e),n)})),t)}}]),t}();Yt.shared=new Yt,Yt.temp=new Yt,Yt.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i,function(){for(var t=[],e=[],n=0;n<32;n++)t[n]=n,e[n]=n;t[ht.NORMAL_NPM]=ht.NORMAL,t[ht.ADD_NPM]=ht.ADD,t[ht.SCREEN_NPM]=ht.SCREEN,e[ht.NORMAL]=ht.NORMAL_NPM,e[ht.ADD]=ht.ADD_NPM,e[ht.SCREEN]=ht.SCREEN_NPM;var i=[];i.push(e),i.push(t)}();var qt=function(){function t(e,n,i,r){o(this,t),this.left=e,this.top=n,this.right=i,this.bottom=r}return u(t,[{key:"width",get:function(){return this.right-this.left}},{key:"height",get:function(){return this.bottom-this.top}},{key:"isEmpty",value:function(){return this.left===this.right||this.top===this.bottom}}]),t}();qt.EMPTY=new qt(0,0,0,0);var Xt=Object.create(null);function Ft(t,e){return Ft=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},Ft(t,e)}function Ut(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ft(t,e)}function Ht(t,e){if(e&&("object"===c(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function Gt(t){return Gt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Gt(t)}var Zt=function(){function t(){o(this,t),this.__length=0}return u(t,[{key:"length",get:function(){return this.__length}},{key:"add",value:function(t){return null==this.first?this.first=this.last=t:(t.prev=this.last,this.last.next=t,this.last=t),t.list=this,this.__length++,this}},{key:"remove",value:function(t){if(null!=t.list)return this.first===this.last?this.first=this.last=null:this.__length>0&&(t===this.last?(t.prev.next=null,this.last=t.prev):t===this.first?(t.next.prev=null,this.first=t.next):(t.next.prev=t.prev,t.prev.next=t.next)),t.next=t.prev=t.list=null,this.__length--,this}},{key:"clear",value:function(){if(this.first){for(var t=this.first;t;){var e=t.next;t.next=t.prev=t.list=null,t=e}this.first=this.last=null}}},{key:"toArray",value:function(){var t=[];if(!this.first)return t;for(var e=this.first;e;)t.push(e),e=e.next;return t}}]),t}(),zt=function(){function t(e){o(this,t),this.data=e}return u(t,[{key:"update",value:function(t){}},{key:"dispose",value:function(){}}]),t}();function Vt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}var Qt=function(t){Ut(n,t);var e=Vt(n);function n(t){var i;return o(this,n),(i=e.call(this)).componentId=t,i.exhausted=!1,i.completed=!1,i.name="",i.endTime=0,i._x=0,i._y=0,i._rotation=0,i._alpha=0,i._scale=new r.Point,i._time=0,i._active=!1,i.__recycled=!0,i}return u(n,[{key:"update",value:function(t){}},{key:"recycle",value:function(){}},{key:"active",get:function(){return this._active}},{key:"scale",get:function(){return this._scale},set:function(t){this._scale=t}},{key:"alpha",get:function(){return this._alpha},set:function(t){this._alpha=t}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t}},{key:"y",get:function(){return this._y},set:function(t){this._y=t}},{key:"x",get:function(){return this._x},set:function(t){this._x=t}},{key:"__applySettings",value:function(t){}}]),n}(zt),$t=function(){function t(){o(this,t)}return u(t,null,[{key:"float",value:function(t,e){return Math.random()*(e-t)+t}},{key:"bool",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<t}},{key:"sign",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<t?1:-1}},{key:"bit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5;return Math.random()<t?1:0}},{key:"integer",value:function(t,e){return Math.floor(Math.random()*(e-t)+t)}}]),t}(),Jt=function(){function t(){o(this,t),this.__hasCallback=!1,this._list=new Zt}return u(t,[{key:"add",value:function(t,e,n){this._list.add(new zt(new Kt(t,e,!1,n))),this.__hasCallback=!0}},{key:"addOnce",value:function(t,e){this._list.add(new zt(new Kt(t,e,!0))),this.__hasCallback=!0}},{key:"dispatch",value:function(){for(var t,e=this._list,n=e.first,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];for(;n;){t=n.next;var s=!0,o=n.data;o.callRate&&o.calls%o.callRate!=0&&(s=!1),s&&(o.callback.apply(o.scope,r),o.once&&e.remove(n)),n=t}this.__hasCallback=e.__length>0}},{key:"remove",value:function(t){for(var e,n=this._list,i=n.first;i;){if(e=i.next,i.data.callback===t)return void n.remove(i);i=e}this.__hasCallback=n.__length>0}},{key:"removeAll",value:function(){this._list.clear(),this.__hasCallback=!1}}]),t}(),Kt=u((function t(e,n,i,r){o(this,t),this.callback=e,this.scope=n,this.once=i,this.callRate=r,this.calls=0}));function Wt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}var te=function(t){Ut(n,t);var e=Wt(n);function n(t){var i;return o(this,n),(i=e.call(this,t)).targetOffset=0,i.autoRecycleOnComplete=!0,i._particles=new Zt,i._particleCount=0,i._childEmitters=[],i._hasChildEmitters=!1,i._paused=!1,i.__adoptRotation=!1,i.__on={started:new Jt,completed:new Jt,exhausted:new Jt,particleUpdated:new Jt,particleSpawned:new Jt,particleBounced:new Jt,particleDied:new Jt},i}return u(n,[{key:"init",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return this.container=t,this.core.__scaleMod=this._scaleMod=n,e&&this.start(),this}},{key:"start",value:function(){if(this._active)return this;var t=Date.now(),e=this.settings,n=this.__fx;n.emitterCount++,this.infinite=e.infinite,this._time=Number.MAX_VALUE,e.duration>0?this.endTime=t+1e3*e.duration:this.endTime=e.duration,this._nextSpawnTime=0,this._particleCount=0,this._active=!0,this.exhausted=this.completed=!1,n.__addActiveEffect(this);var i=e.childs.length;if(this._hasChildEmitters=i>0,this._hasChildEmitters)for(;--i>-1;){var r=e.childs[i],a=n.getParticleEmitterById(r.id),s=n.__containers[a.settings.containerId]||this.container;a.init(s,!0,(r.scale||1)*(this._scaleMod||1)),r.adoptRotation&&(a.rotation=this._rotation,a.__adoptRotation=!0),a.__parent=this,this._childEmitters.push(a)}return this.rotation=this._rotation,this.__on.started.__hasCallback&&this.__on.started.dispatch(this),this}},{key:"stop",value:function(){!(arguments.length>0&&void 0!==arguments[0])||arguments[0]?(this.exhausted=!0,this._hasChildEmitters&&this.stopChildEmitters(!0)):(this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.autoRecycleOnComplete?this.recycle():(this.recycleParticles(),this.completed=!0,this._active=!1,this.__fx.__removeActiveEffect(this)))}},{key:"update",value:function(t){if(!this._active)return this;var e=Date.now(),n=this.settings;this.exhausted?0==this._particleCount&&(this._active=!1,this.completed=!0,this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.__fx.__removeActiveEffect(this),this.autoRecycleOnComplete&&this.recycle()):(0!==this.settings.autoRotation&&(this.rotation+=n.autoRotation*(t/.016666)),this.target&&(this.rotation=this.target.rotation,0==this.targetOffset?(this.x=this.target.x,this.y=this.target.y):(this.x=this.target.x+Math.cos(this._rotation)*this.targetOffset,this.y=this.target.y+Math.sin(this._rotation)*this.targetOffset)),0!=this.endTime||this.infinite?this.infinite||e<this.endTime?(this._time+=t,this._time>=this._nextSpawnTime&&(this._time=0,this.spawn(),this._nextSpawnTime=this._time+$t.float(n.spawnFrequencyMin,n.spawnFrequencyMax))):(this.exhausted=!0,this.__on.exhausted.__hasCallback&&this.__on.exhausted.dispatch(this)):(this.spawn(),this.exhausted=!0));for(var i,r=this._particles.first;r;)i=r.next,r.update(t),r=i;return this}},{key:"spawn",value:function(){if(this._paused)return this;var t=this.settings,e=this.__fx,n=$t.integer(t.spawnCountMin,t.spawnCountMax)*e.particleFac;for(this.core.prepare(n);--n>-1;){if(this._particleCount>=t.maxParticles||e.particleCount>=e.maxParticles)return this;var i=t.particleSettings,r=e.__getParticle(),a=void 0;switch(i.componentType){case 0:r.componentId=i.componentId,a=e.__getSprite(r.componentId);break;case 1:r.componentId=i.componentId,a=e.__getMovieClip(r.componentId),i.componentParams&&(a.loop=!(null==i.componentParams.loop||!i.componentParams.loop),a.animationSpeed=$t.float(i.componentParams.animationSpeedMin||1,i.componentParams.animationSpeedMax||1)),a.gotoAndPlay(0)}a.anchor.set(i.componentParams.anchorX,i.componentParams.anchorY),r.component=a,this.core.emit(r),r.init(this,i,this._scaleMod),this._particles.add(r),this._particleCount++,e.particleCount++}return this.core.step(),this._nextSpawnTime=$t.float(t.spawnFrequencyMin,t.spawnFrequencyMax),this}},{key:"recycle",value:function(){if(!this.__recycled){this.__parent&&(this.__parent.__removeChildEmitter(this),this.__parent=void 0),this.recycleParticles(),this.settings=void 0,this._active=!1,this._paused=!1,this.completed=!0,this._x=this._y=this._rotation=0,this._hasChildEmitters&&(this.stopChildEmitters(!0),this._childEmitters.length=0,this._hasChildEmitters=!1),this.__fx.emitterCount--,this.__fx.__recycleEmitter(this),this.__recycled=!0,this.__adoptRotation=!1,this.core=null,this.target=null,this.name=null;var t=this.__on;t.completed.__hasCallback&&t.completed.removeAll(),t.started.__hasCallback&&t.started.removeAll(),t.exhausted.__hasCallback&&t.exhausted.removeAll(),t.particleBounced.__hasCallback&&t.particleBounced.removeAll(),t.particleDied.__hasCallback&&t.particleDied.removeAll(),t.particleSpawned.__hasCallback&&t.particleSpawned.removeAll(),t.particleUpdated.__hasCallback&&t.particleUpdated.removeAll()}}},{key:"dispose",value:function(){for(var t,e=this._particles,n=e.first;n;)t=n.next,n.recycle(),n=t;e.clear(),this.__recycled=!0,this._hasChildEmitters&&this.stopChildEmitters(!1),this.__fx.particleCount-=this._particleCount,this._particles=null,this.componentId=null,this.settings=null,this._active=!1,this.completed=!0,this._childEmitters=null,this.core&&this.core.dispose(),this.core=null,this.target=null,this.name=null;var i=this.__on;i.completed.removeAll(),i.started.removeAll(),i.exhausted.removeAll(),i.particleBounced.removeAll(),i.particleDied.removeAll(),i.particleSpawned.removeAll(),i.particleUpdated.removeAll(),this.__parent=null,this.__fx.__removeActiveEffect(this),this.__fx=null}},{key:"x",get:function(){return this._x},set:function(t){if(this._x=this.core.x=t,this._xPosIntialized||(this.core.__x=t,this._xPosIntialized=!0),this._hasChildEmitters)for(var e=this._childEmitters,n=e.length;--n>-1;)e[n].x=t}},{key:"y",get:function(){return this._y},set:function(t){if(this._y=this.core.y=t,this._yPosIntialized||(this.core.__y=t,this._yPosIntialized=!0),this._hasChildEmitters)for(var e=this._childEmitters,n=e.length;--n>-1;)e[n].y=t}},{key:"rotation",get:function(){return this._rotation},set:function(t){if(this._rotation=this.core.rotation=t,this._hasChildEmitters)for(var e=this._childEmitters,n=e.length;--n>-1;){var i=e[n];i.__adoptRotation&&(i.rotation=i.settings.rotation+t)}}},{key:"paused",get:function(){return this._paused},set:function(t){if(this._paused=t,this._hasChildEmitters)for(var e=this._childEmitters,n=e.length;--n>-1;)e[n].paused=t}},{key:"on",get:function(){return this.__on}},{key:"recycleParticles",value:function(){for(var t,e=this._particles.first;e;)t=e.next,e.recycle(),e=t;this._particles.clear(),this.__fx.particleCount-=this._particleCount}},{key:"stopChildEmitters",value:function(t){for(var e=this._childEmitters,n=e.length;--n>-1;)e[n].stop(t)}},{key:"__removeParticle",value:function(t){t.useSpawns&&this._spawnOnComplete&&this.__subSpawn(t,this.settings.particleSettings.spawn.onComplete),this._particles.remove(t),this._particleCount--,this.__fx.particleCount--,t.recycle()}},{key:"__removeChildEmitter",value:function(t){var e=this._childEmitters.indexOf(t);e>-1&&(this._childEmitters.splice(e,1),0==this._childEmitters.length&&(this._hasChildEmitters=!1))}},{key:"__subSpawn",value:function(t,e){var n=this.__fx;if(e)for(var i=e.length;--i>-1;){var r=e[i],a=void 0,s=void 0;switch(r.type){case 0:a=n.getParticleEmitterById(r.id),s=n.__containers[a.settings.containerId]||this.container,a.init(s,!0,(r.scale||1)*this._scaleMod),r.adoptRotation?(a.rotation=t.component.rotation+a.settings.rotation,a.__adoptRotation=!0):a.rotation=a.settings.rotation;break;case 1:a=n.getEffectSequenceById(r.id),s=n.__containers[a.settings.containerId]||this.container,a.init(s,0,!0,(r.scale||1)*this._scaleMod),r.adoptRotation&&(a.rotation=t.component.rotation)}a.x=t.component.x,a.y=t.component.y}}},{key:"__applySettings",value:function(t){var e=this.__fx;this.__recycled=this._xPosIntialized=this._yPosIntialized=!1,this.settings=t,this.core=e.__getEmitterCore(t.core.type,this),this.core.init(this),this.rotation=t.rotation,this.name=t.name,this._spawnOnComplete=t.particleSettings.spawn.onComplete.length>0,this._childEmitters.length=0}},{key:"__setCore",value:function(t){this.core=this.__fx.__getEmitterCore(t,this),this.core.init(this),this.core.__scaleMod=this._scaleMod,this._xPosIntialized=this._yPosIntialized=!1}}]),n}(Qt);function ee(){return ee="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gt(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},ee.apply(this,arguments)}var ne=function(){function t(e){o(this,t),this.type=e,this._dx=0,this._dy=0,this._rotation=0}return u(t,[{key:"init",value:function(t){this.emitter=t,this._settings=t.settings.core.params,this.x=this.__x=t.x,this.y=this.__y=t.y,this.rotation=t.rotation}},{key:"emit",value:function(t){}},{key:"prepare",value:function(t){this._posInterpolationStep=1/t,this._t=.5*this._posInterpolationStep}},{key:"step",value:function(){this.__x=this.x,this.__y=this.y}},{key:"recycle",value:function(){this.emitter=null,this._settings=null}},{key:"dispose",value:function(){this.recycle(),this.emitter=null,this._settings=null}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this._dx=Math.cos(t),this._dy=Math.sin(t)}}]),t}();function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}ne.__TYPE_BOX="box",ne.__TYPE_CIRCLE="circle",ne.__TYPE_RING="ring";var re=function(t){Ut(n,t);var e=ie(n);function n(){return o(this,n),e.call(this,ne.__TYPE_RING)}return u(n,[{key:"prepare",value:function(t){ee(Gt(n.prototype),"prepare",this).call(this,t);var e=this._settings.angle;2*Math.PI-e<.1?(this._uniformStep=e/t,this._angle=e):(this._uniformStep=e/(t-1),this._angle=.5*-e)}},{key:"emit",value:function(t){var e,n=this._settings,i=this.emitter;n.uniform?(e=this._angle+i.rotation,this._angle+=this._uniformStep):e=$t.float(.5*-n.angle,.5*n.angle)+i.rotation;var r=n.radius*this.__scaleMod;t.component.x=this.__x+this._t*(this.x-this.__x)+Math.cos(e)*r,t.component.y=this.__y+this._t*(this.y-this.__y)+Math.sin(e)*r,n.radial?(t.dx=Math.cos(e),t.dy=Math.sin(e),t.component.rotation=e):(t.dx=this._dx,t.dy=this._dy,t.component.rotation=i.rotation),this._t+=this._posInterpolationStep}}]),n}(ne);function ae(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}var se=function(t){Ut(n,t);var e=ae(n);function n(){return o(this,n),e.call(this,ne.__TYPE_CIRCLE)}return u(n,[{key:"emit",value:function(t){var e,n=this._settings,i=this.emitter;if(e=n.angle?$t.float(.5*-n.angle,.5*n.angle)+i.rotation:$t.float(0,6.28319)+i.rotation,n.radius>0){var r=$t.float(0,n.radius)*this.__scaleMod;t.component.x=this.__x+this._t*(this.x-this.__x)+Math.cos(e)*r,t.component.y=this.__y+this._t*(this.y-this.__y)+Math.sin(e)*r}else t.component.x=this.__x+this._t*(this.x-this.__x),t.component.y=this.__y+this._t*(this.y-this.__y);n.radial?(t.dx=Math.cos(e),t.dy=Math.sin(e),t.component.rotation=e):(t.dx=this._dx,t.dy=this._dy,t.component.rotation=i.rotation),this._t+=this._posInterpolationStep}}]),n}(ne);function oe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}var ce,le=function(t){Ut(n,t);var e=oe(n);function n(){return o(this,n),e.call(this,ne.__TYPE_BOX)}return u(n,[{key:"emit",value:function(t){var e=this._settings,n=this.emitter,i=.5*e.width*this.__scaleMod,r=.5*e.height*this.__scaleMod,a=n.rotation,s=$t.float(-i,i),o=$t.float(-r,r);0!=a?(t.component.x=this.__x+this._t*(this.x-this.__x)+s*Math.cos(a)-o*Math.sin(a),t.component.y=this.__y+this._t*(this.y-this.__y)+s*Math.sin(a)+o*Math.cos(a)):(t.component.x=this.__x+this._t*(this.x-this.__x)+s,t.component.y=this.__y+this._t*(this.y-this.__y)+o),e.radial?(a+=Math.atan2(o,s),t.dx=Math.cos(a),t.dy=Math.sin(a)):(t.dx=this._dx,t.dy=this._dy),t.component.rotation=a,this._t+=this._posInterpolationStep}}]),n}(ne);function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}t.EffectSequenceComponentType=void 0,(ce=t.EffectSequenceComponentType||(t.EffectSequenceComponentType={}))[ce.Sprite=0]="Sprite",ce[ce.MovieClip=1]="MovieClip",ce[ce.Emitter=2]="Emitter",ce[ce.Trigger=3]="Trigger";var ue=function(e){Ut(i,e);var n=he(i);function i(t){var e;return o(this,i),(e=n.call(this,t))._list=[],e._elements=new Zt,e.__on={started:new Jt,completed:new Jt,exhausted:new Jt,effectSpawned:new Jt,triggerActivated:new Jt},e}return u(i,[{key:"init",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return this.container=t,this._scaleMod=i,this._delay=1e3*e,n&&this.start(),this}},{key:"start",value:function(){if(!this._active)return this._startTime=Date.now()+(this.settings.delay?1e3*this.settings.delay:0)+this._delay,this._index=0,0==this._list.length?(this._active=!1,this.__on.exhausted.__hasCallback&&this.__on.exhausted.dispatch(this),this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.recycle(),this):(this.exhausted=this.completed=!1,this.setNextEffect(),this.__fx.effectSequenceCount++,this.__fx.__addActiveEffect(this),this.__on.started.__hasCallback&&this.__on.started.dispatch(this),this)}},{key:"update",value:function(e){var n=Date.now();if(!(n<this._startTime)){if(this._time+=e,!this.exhausted&&n>=this._effectStartTime){var i,r,a,s=this.__fx,o=this._nextEffectSettings;switch(o.componentType){case t.EffectSequenceComponentType.Sprite:i=s.__getSprite(o.componentId),(a=s.__containers[o.containerId]||this.container).addChild(i),i.blendMode=s.useBlendModes?o.blendMode:0,i.tint=o.tint,i.scale.set($t.float(o.scaleMin,o.scaleMax)*$t.float(this.settings.scaleMin,this.settings.scaleMax)*this._scaleMod),i.alpha=$t.float(o.alphaMin,o.alphaMax),i.anchor.set(o.componentParams.anchorX,o.componentParams.anchorY),r=new zt({component:i,endTime:n+1e3*o.duration}),this._elements.add(r),i.x=this._x,i.y=this._y,i.rotation=this._rotation+$t.float(o.rotationMin,o.rotationMax),this.__on.effectSpawned.__hasCallback&&this.__on.effectSpawned.dispatch(t.EffectSequenceComponentType.Sprite,i);break;case t.EffectSequenceComponentType.MovieClip:i=s.__getMovieClip(o.componentId),o.componentParams.loop?(i.animationSpeed=$t.float(o.componentParams.animationSpeedMin||1,o.componentParams.animationSpeedMax||1),i.loop=o.componentParams.loop||!1):o.duration,i.anchor.set(o.componentParams.anchorX,o.componentParams.anchorY),i.gotoAndPlay(0),(a=s.__containers[o.containerId]||this.container).addChild(i),i.blendMode=s.useBlendModes?o.blendMode:0,i.tint=o.tint,i.scale.set($t.float(o.scaleMin,o.scaleMax)*$t.float(this.settings.scaleMin,this.settings.scaleMax)*this._scaleMod),i.alpha=$t.float(o.alphaMin,o.alphaMax),r=new zt({component:i,endTime:n+1e3*o.duration}),this._elements.add(r),i.x=this._x,i.y=this._y,i.rotation=this._rotation+$t.float(o.rotationMin,o.rotationMax),this.__on.effectSpawned.__hasCallback&&this.__on.effectSpawned.dispatch(t.EffectSequenceComponentType.MovieClip,i);break;case t.EffectSequenceComponentType.Emitter:i=s.getParticleEmitterById(o.componentId),a=s.__containers[o.containerId]||this.container,i.init(a,!0,$t.float(o.scaleMin,o.scaleMax)*$t.float(this.settings.scaleMin,this.settings.scaleMax)*this._scaleMod),r=new zt({component:i,endTime:i.endTime}),this._elements.add(r),i.x=this._x,i.y=this._y,i.rotation=this._rotation+i.settings.rotation,this.__on.effectSpawned.__hasCallback&&this.__on.effectSpawned.dispatch(t.EffectSequenceComponentType.Emitter,i);break;case t.EffectSequenceComponentType.Trigger:this.__on.triggerActivated.__hasCallback&&this.__on.triggerActivated.dispatch(o.triggerValue)}this._index==this._list.length?(this.exhausted=!0,this.__on.exhausted.__hasCallback&&this.__on.exhausted.dispatch(this)):this.setNextEffect()}for(var c=this._elements,l=c.first;l;){if(l.update(e),n>l.data.endTime){var h=l.data.component;h instanceof te?h.completed&&c.remove(l):(c.remove(l),h.recycle())}l=l.next}this.exhausted&&0==c.length&&(this._active=!1,this.completed=!0,this.__on.completed.__hasCallback&&this.__on.completed.dispatch(this),this.recycle())}}},{key:"stop",value:function(){this.recycle()}},{key:"recycle",value:function(){if(!this.__recycled){for(var t,e=this._elements,n=e.first;n;)t=n.next,n.data.component.recycle(),n=t;var i=this.__on;i.completed.__hasCallback&&i.completed.removeAll(),i.started.__hasCallback&&i.started.removeAll(),i.exhausted.__hasCallback&&i.exhausted.removeAll(),i.effectSpawned.__hasCallback&&i.effectSpawned.removeAll(),i.triggerActivated.__hasCallback&&i.triggerActivated.removeAll(),e.clear(),this.__recycled=!0,this._x=this._y=this._rotation=0,this.__fx.effectSequenceCount--,this.__fx.__recycleEffectSequence(this)}}},{key:"dispose",value:function(){this._elements.clear(),this.__fx=void 0;var t=this.__on;t.completed=t.started=t.exhausted=t.effectSpawned=t.triggerActivated=void 0}},{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t;for(var e,n=this._elements.first;n;)e=n.next,n.data.rotation=t,n=e}},{key:"x",get:function(){return this._x},set:function(t){this._x=t;for(var e,n=this._elements.first;n;)e=n.next,n.data.x=t,n=e}},{key:"y",get:function(){return this._y},set:function(t){this._y=t;for(var e,n=this._elements.first;n;)e=n.next,n.data.y=t,n=e}},{key:"on",get:function(){return this.__on}},{key:"setNextEffect",value:function(){if(!this.exhausted){var t=this._nextEffectSettings=this._list[this._index++];this._effectStartTime=this._startTime+1e3*t.delay}}},{key:"__applySettings",value:function(t){this.settings=t,this.name=t.name,this._list=t.effects.slice(),this.__recycled=!1}}]),i}(Qt);function fe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}var pe=function(t){Ut(n,t);var e=fe(n);function n(t,i,a,s){var c;return o(this,n),(c=e.call(this,r.Texture.from(i))).componentId=t,c.anchor.set(a||.5,s||.5),c.__sequenceEndTime=null,c}return u(n,[{key:"recycle",value:function(){this.tint=16777215,this.alpha=1,this.rotation=0,this.scale.set(1),this.parent&&this.parent.removeChild(this),this.__fx.__recycleSprite(this.componentId,this)}},{key:"dispose",value:function(){this.__fx=null,this.recycle(),this.destroy(!1)}}]),n}(r.Sprite),de=function(){function t(){o(this,t)}return u(t,[{key:"setRgb",value:function(t,e){this.startRgb=this.rgb=t,this.r=this.sR=t>>16&255,this.g=this.sG=t>>8&255,this.b=this.sB=255&t,this.targetRgb=e,this.dR=(e>>16&255)-this.r,this.dG=(e>>8&255)-this.g,this.dB=(255&e)-this.b}},{key:"tween",value:function(t,e,n){return t?(this.r=t(e,this.sR,this.dR,n),this.g=t(e,this.sG,this.dG,n),this.b=t(e,this.sB,this.dB,n)):(e/=n,this.r=this.dR*e+this.sR,this.g=this.dG*e+this.sG,this.b=this.dB*e+this.sB),this.rgb=this.r<<16|this.g<<8|this.b,this.rgb}}]),t}(),_e=function(){function t(){o(this,t)}return u(t,null,[{key:"linear",value:function(t,e,n,i){return n*t/i+e}},{key:"easeInQuad",value:function(t,e,n,i){return n*(t/=i)*t+e}},{key:"easeOutQuad",value:function(t,e,n,i){return-n*(t/=i)*(t-2)+e}},{key:"easeInOutQuad",value:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e}},{key:"easeInCubic",value:function(t,e,n,i){return n*(t/=i)*t*t+e}},{key:"easeOutCubic",value:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}},{key:"easeInOutCubic",value:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}},{key:"easeInQuart",value:function(t,e,n,i){return n*(t/=i)*t*t*t+e}},{key:"easeOutQuart",value:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e}},{key:"easeInOutQuart",value:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}},{key:"easeInQuint",value:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e}},{key:"easeOutQuint",value:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e}},{key:"easeInOutQuint",value:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}},{key:"easeInSine",value:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}},{key:"easeOutSine",value:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e}},{key:"easeInOutSine",value:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e}},{key:"easeInExpo",value:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e}},{key:"easeOutExpo",value:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e}},{key:"easeInOutExpo",value:function(t,e,n,i){return(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e}},{key:"easeInCirc",value:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e}},{key:"easeOutCirc",value:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e}},{key:"easeInOutCirc",value:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}},{key:"easeInElastic",value:function(t,e,n,i){var r,a,s;return s=1.70158,0===t||(t/=i),(a=0)||(a=.3*i),(r=n)<Math.abs(n)?(r=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/a)+e}},{key:"easeOutElastic",value:function(t,e,n,i){var r,a,s;return s=1.70158,0===t||(t/=i),(a=0)||(a=.3*i),(r=n)<Math.abs(n)?(r=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-s)*(2*Math.PI)/a)+n+e}},{key:"easeInOutElastic",value:function(t,e,n,i){var r,a,s;return s=1.70158,0===t||(t/=i/2),(a=0)||(a=i*(.3*1.5)),(r=n)<Math.abs(n)?(r=n,s=a/4):s=a/(2*Math.PI)*Math.asin(n/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/a)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-s)*(2*Math.PI)/a)*.5+n+e}},{key:"easeInBack",value:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e}},{key:"easeOutBack",value:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e}},{key:"easeInOutBack",value:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e}},{key:"easeInBounce",value:function(e,n,i,r){return i-t.easeOutBounce(r-e,0,i,r)+n}},{key:"easeOutBounce",value:function(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}},{key:"easeInOutBounce",value:function(e,n,i,r){return e<r/2?.5*t.easeInBounce(2*e,0,i,r)+n:.5*t.easeOutBounce(2*e-r,0,i,r)+.5*i+n}}]),t}();function ve(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}var ye=function(t){Ut(n,t);var e=ve(n);function n(){var t;return o(this,n),(t=e.call(this)).dx=0,t.dy=0,t._childEmitters=[],t._hasChildEmitters=!1,t._spawnOnHalfway=!1,t.__recycled=!0,t.__on={died:new Jt,bounced:new Jt,updated:new Jt},t._color=new de,t}return u(n,[{key:"init",value:function(t,e,n){var i=this.component,r=this.__fx;this.emitter=t,this.settings=e;var a=this.duration=$t.float(e.durationMin,e.durationMax)*n;if(this._dt=1/this.duration,this.time=0,this.__recycled=!1,e.addOnTop?t.container.addChild(i):t.container.addChildAt(i,0),i.blendMode=r.useBlendModes?e.blendMode:0,this.startX=i.x,this.startY=i.y,this.useGravity=t.settings.useGravity,this.useScale=e.useScale,this.useRotation=e.useRotation,this.useAlpha=e.useAlpha,this.useTint=e.useTint,this.useSpawns=e.useSpawns,this.useChilds=e.useChilds,this.useMotion=e.useMotion,this.useGravity)if(this.gravity=t.settings.gravity,this.useFloor=t.settings.useFloor,this.floorY=t.settings.floorY,this.bounceFac=$t.float(e.bounceFacMin,e.bounceFacMax)*n,this.friction=1-$t.float(e.frictionMin,e.frictionMax)*n,this._spawnOnBounce=e.spawn.onBounce.length>0,this.useAlign=e.align,e.useMotion){var s=$t.float(e.moveSpeedMin,e.moveSpeedMax);this.moveSpeedX=s*this.dx*n,this.moveSpeedY=s*this.dy*n}else this.moveSpeedX=this.moveSpeedY=0;else if(e.useMotion){var o=this.distance=.8*$t.integer(e.distanceMin,e.distanceMax)*n;this.deltaX=.8*(i.x+o*this.dx-this.startX),this.deltaY=.8*(i.y+o*this.dy-this.startY),this.distanceEase=_e[e.distanceEase],this.useAlign=!1}else i.x=this.startX,i.y=this.startY;if(e.useRotation&&e.randomStartRotation&&!this.useAlign&&(i.rotation=$t.float(0,6.28319)),e.useAlpha&&(this.alphaStart=i.alpha=$t.float(e.alphaStartMin,e.alphaStartMax),this.alphaDelta=$t.float(e.alphaEndMin,e.alphaEndMax)-this.alphaStart,this.alphaEase=_e[e.alphaEase]||null,this.useFadeIn=e.fadeIn,e.fadeIn&&(this.alphaDuration=a*(1-e.fadeInDurationFac),this.fadeInDuration=a*e.fadeInDurationFac,this.fadeInEase=_e[e.fadeInEase||"easeInSine"])),e.useScale&&(this.uniformScale=e.uniformScale,this.useScaleIn=e.scaleIn,e.useScale?(this.uniformScale=e.uniformScale,this.scaleEase=_e[e.scaleEase],e.uniformScale?(this.scaleStart=i.scale.x=i.scale.y=$t.float(e.scaleStartMin,e.scaleStartMax)*n,this.scaleDelta=($t.float(e.scaleEndMin,e.scaleEndMax)-this.scaleStart)*n):(this.scaleXStart=i.scale.x=$t.float(e.scaleXStartMin,e.scaleXStartMax)*n,this.scaleXDelta=($t.float(e.scaleXEndMin,e.scaleXEndMax)-this.scaleXStart)*n,this.scaleXEase=_e[e.scaleXEase],this.scaleYStart=i.scale.y=$t.float(e.scaleYStartMin,e.scaleYStartMax)*n,this.scaleYDelta=($t.float(e.scaleYEndMin,e.scaleYEndMax)-this.scaleYStart)*n,this.scaleYEase=_e[e.scaleYEase]),e.scaleIn&&(this.scaleDuration=a*(1-e.scaleInDurationFac),this.scaleInDuration=a*e.scaleInDurationFac,this.scaleInEase=_e[e.scaleInEase||"easeInSine"])):e.uniformScale?(i.scale.x=e.scaleStartMin,i.scale.y=e.scaleStartMin):(i.scale.x=e.scaleXStartMin,i.scale.y=e.scaleYStartMin)),e.useRotation&&(this.rotationSpeed=$t.float(e.rotationSpeedMin,e.rotationSpeedMax)*n,e.randomRotationDirection&&(this.rotationSpeed*=$t.sign())),e.useTint&&(this.tintEase=_e[e.tintEase],this._color.setRgb(e.tintStart,e.tintEnd)),e.useChilds){this._childEmitters.length=0;var c=e.childs.length;if(this._hasChildEmitters=c>0,this._childEmitters)for(;--c>-1;){var l=e.childs[c],h=r.getParticleEmitterById(l.id);h.init(t.container,!0,(l.scale||1)*(n||1)),l.adoptRotation&&(h.rotation=i.rotation,h.__adoptRotation=!0),h.__parent=this,this._childEmitters.push(h)}}return e.useSpawns&&(e.spawn.onStart.length>0&&t.__subSpawn(this,e.spawn.onStart),this._spawnOnHalfway=e.spawn.onHalfway.length>0),t.__on.particleSpawned.__hasCallback&&t.__on.particleSpawned.dispatch(this),this}},{key:"update",value:function(t){var e=this.time+=t,n=this.duration;if(e>=n)this.emitter.__removeParticle(this);else{var i=this.component,r=e*t;if(this.useGravity){var a=t/.0166666;if(i.x+=this.moveSpeedX*a,i.y+=this.moveSpeedY*a,this.moveSpeedY+=this.gravity*a,this.useAlign&&(i.rotation=Math.atan2(this.moveSpeedY,this.moveSpeedX)),this.useFloor&&this.floorY>0&&i.y>this.floorY){i.y=this.floorY,this.moveSpeedY*=-this.bounceFac,this.moveSpeedX*=this.friction,this.useSpawns&&this._spawnOnBounce&&this.emitter.__subSpawn(this,this.settings.spawn.onBounce);var s=this.emitter;return s.__on.particleBounced.__hasCallback&&s.__on.particleBounced.dispatch(this),this.__on.bounced.__hasCallback&&this.__on.bounced.dispatch(this),void(this.settings.stopOnBounce&&s.__removeParticle(this))}}else this.useMotion&&(this.distanceEase?(i.x=this.distanceEase(e,this.startX,this.deltaX,n),i.y=this.distanceEase(e,this.startY,this.deltaY,n)):(i.x=this.deltaX*r+this.startX,i.y=this.deltaY*r+this.startY));if(this.useAlpha&&(this.useFadeIn?e<this.fadeInDuration?i.alpha=this.fadeInEase(e,0,this.alphaStart,this.fadeInDuration):i.alpha=this.alphaEase(e-this.fadeInDuration,this.alphaStart,this.alphaDelta,this.alphaDuration):this.alphaEase?i.alpha=this.alphaEase(e,this.alphaStart,this.alphaDelta,n):i.alpha=this.alphaDelta*r+this.alphaStart),this.useRotation&&(i.rotation+=this.rotationSpeed),this.useScale&&(this.uniformScale?this.useScaleIn?e<this.scaleInDuration?i.scale.x=i.scale.y=this.scaleInEase(e,0,this.scaleStart,this.scaleInDuration):i.scale.x=i.scale.y=this.scaleEase(e-this.scaleInDuration,this.scaleStart,this.scaleDelta,this.scaleDuration):this.scaleEase?(i.scale.x=this.scaleEase(e,this.scaleStart,this.scaleDelta,n),i.scale.y=this.scaleEase(e,this.scaleStart,this.scaleDelta,n)):i.scale.x=i.scale.y=this.scaleDelta*r+this.scaleStart:this.useScaleIn?e<this.scaleInDuration?(i.scale.x=this.scaleInEase(e,0,this.scaleXStart,this.scaleInDuration),i.scale.y=this.scaleInEase(e,0,this.scaleYStart,this.scaleInDuration)):(i.scale.x=this.scaleEase(e-this.scaleInDuration,this.scaleXStart,this.scaleXDelta,this.scaleDuration),i.scale.y=this.scaleEase(e-this.scaleInDuration,this.scaleYStart,this.scaleYDelta,this.scaleDuration)):(this.scaleXEase?i.scale.x=this.scaleXEase(e,this.scaleXStart,this.scaleXDelta,n):i.scale.x=this.scaleXDelta*r+this.scaleXStart,this.scaleYEase?i.scale.y=this.scaleYEase(e,this.scaleYStart,this.scaleYDelta,n):i.scale.y=this.scaleYDelta*r+this.scaleYStart)),this.useTint&&(i.tint=this._color.tween(this.tintEase,e,n)),this._spawnOnHalfway&&e>=.5&&(this._spawnOnHalfway=!1,this.emitter.__subSpawn(this,this.settings.spawn.onHalfway)),this.useChilds&&this._hasChildEmitters)for(var o=this._childEmitters,c=o.length;--c>-1;){var l=o[c];l.__recycled||(l.x=i.position.x,l.y=i.position.y,l.__adoptRotation&&(l.rotation=i.rotation))}this.emitter.__on.particleUpdated.__hasCallback&&this.emitter.__on.particleUpdated.dispatch(this),this.__on.updated.__hasCallback&&this.__on.updated.dispatch(this)}}},{key:"stop",value:function(){this.time=this.duration}},{key:"recycle",value:function(){this.emitter.__on.particleDied.__hasCallback&&this.emitter.__on.particleDied.dispatch(this);var t=this.__on;if(t.died.__hasCallback&&(t.died.dispatch(this),t.died.removeAll()),t.updated.__hasCallback&&t.updated.removeAll(),t.bounced.__hasCallback&&t.bounced.removeAll(),this._hasChildEmitters){for(var e=this._childEmitters,n=e.length;--n>-1;)e[n].stop(!0);this._childEmitters.length=0,this._hasChildEmitters=!1}this.component.recycle(),this.__fx.__recycleParticle(this),this.dx=this.dy=this.deltaX=this.deltaY=0,this.component=null,this.emitter=null,this.settings=null,this.__recycled=!0}},{key:"dispose",value:function(){this.recycle(),this.__fx=null}},{key:"x",get:function(){return this.component.x}},{key:"y",get:function(){return this.component.y}},{key:"on",get:function(){return this.__on}},{key:"__removeChildEmitter",value:function(t){var e=this._childEmitters.indexOf(t);e>-1&&(this._childEmitters.splice(e,1),0==this._childEmitters.length&&(this._hasChildEmitters=!1))}}]),n}(zt);function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=Gt(t);if(e){var r=Gt(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return Ht(this,n)}}var ge=function(t){Ut(n,t);var e=me(n);function n(t,i,a,s){var c;o(this,n);for(var l=[],h=i.length,u=0;u<h;u++)l.push(r.Texture.from(i[u]));return(c=e.call(this,l)).componentId=t,c.anchor.set(.5,.5),c.loop=!1,c.__sequenceEndTime=0,c}return u(n,[{key:"recycle",value:function(){this.alpha=1,this.tint=16777215,this.rotation=0,this.scale.set(1),this.parent&&this.parent.removeChild(this),this.gotoAndStop(0),this.__fx.__recycleMovieClip(this.componentId,this)}},{key:"dispose",value:function(){this.parent&&this.parent.removeChild(this),this.gotoAndStop(0),this.destroy()}}]),n}(r.AnimatedSprite);function xe(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return be(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return be(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function be(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var we,Se=function(){function t(){o(this,t)}return u(t,null,[{key:"sanitizeBundle",value:function(e){var n,i=xe(e.emitters);try{for(i.s();!(n=i.n()).done;){var r=n.value,a=t._presetStructure.emitter;t.parse(r,a,t._presetStructure.emitterSpawn)}}catch(t){i.e(t)}finally{i.f()}var s,o=xe(e.sequences);try{for(o.s();!(s=o.n()).done;){var c=s.value,l=t._presetStructure.sequence;t.parse(c,l,t._presetStructure.sequenceEffect)}}catch(t){o.e(t)}finally{o.f()}}},{key:"parse",value:function(e,n,i){for(var r in n)if(null==e[r])e[r]=n[r];else{var a=e[r];if("object"!==c(a))continue;var s=n[r];if(a.hasOwnProperty("length")){var o,l=xe(a);try{for(l.s();!(o=l.n()).done;){var h=o.value;for(var u in i)null==h[u]&&(h[u]=i[u])}}catch(t){l.e(t)}finally{l.f()}}else t.parse(a,s,i)}}}]),t}();function Ee(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Me(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Me(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var i=0,r=function(){};return{s:r,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,o=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return s=t.done,t},e:function(t){o=!0,a=t},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw a}}}}function Me(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}Se._presetStructure={sequence:{id:0,name:"",type:1,delay:0,scaleMin:1,scaleMax:1,effects:[]},sequenceEffect:{id:0,componentId:null,componentType:0,delay:0,componentParams:{animationSpeedMin:1,animationSpeedMax:1,anchorX:.5,anchorY:.5,loop:!1},scaleMin:1,scaleMax:1,alphaMin:1,alphaMax:1,rotationMin:0,rotationMax:0,blendMode:0,duration:.1,tint:16777215,containerId:"",triggerValue:""},emitter:{id:0,name:"",type:0,core:{type:"circle",params:{radius:100,radial:!0,angle:6.28318530718,uniform:!1,width:100,height:100}},spawnFrequencyMin:.1,spawnFrequencyMax:.1,maxParticles:1e3,spawnCountMin:1,spawnCountMax:1,duration:0,infinite:!0,useGravity:!1,gravity:0,useFloor:!1,floorY:700,rotation:0,autoRotation:0,particleSettings:{componentType:0,componentId:"",componentParams:{animationSpeedMin:1,animationSpeedMax:1,anchorX:.5,anchorY:.5,loop:!1},durationMin:1,durationMax:2,distanceMin:0,distanceMax:0,distanceEase:"linear",moveSpeedMin:0,moveSpeedMax:0,bounceFacMin:0,bounceFacMax:0,frictionMin:0,frictionMax:0,useMotion:!1,useRotation:!1,useAlpha:!1,useScale:!1,useTint:!1,useChilds:!1,useSpawns:!1,stopOnBounce:!1,align:!1,blendMode:1,addOnTop:!0,rotationSpeedMin:0,rotationSpeedMax:0,randomRotationDirection:!1,randomStartRotation:!1,fadeIn:!0,fadeInDurationFac:.1,fadeInEase:"linear",alphaStartMin:.7,alphaStartMax:.9,alphaEndMin:.7,alphaEndMax:.8,alphaEase:"linear",tintStart:16777215,tintEnd:16777215,tintEase:"linear",scaleIn:!1,scaleInDurationFac:.2,scaleInEase:"linear",uniformScale:!0,scaleXStartMin:1,scaleXStartMax:1,scaleXEndMin:1,scaleXEndMax:1,scaleXEase:"linear",scaleYStartMin:1,scaleYStartMax:1,scaleYEndMin:1,scaleYEndMax:1,scaleYEase:"linear",scaleStartMin:1,scaleStartMax:1,scaleEndMin:1,scaleEndMax:1,scaleEase:"linear",childs:[],spawn:{onComplete:[],onBounce:[],onHalfway:[],onStart:[]}},childs:[]},emitterSpawn:{type:0,id:0,scale:1,adoptRotation:!0,containerId:""}},t.ComponentType=void 0,(we=t.ComponentType||(t.ComponentType={}))[we.Sprite=0]="Sprite",we[we.MovieClip=1]="MovieClip";var ke=window&&window.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,a){function s(t){try{c(i.next(t))}catch(t){a(t)}}function o(t){try{c(i.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,o)}c((i=i.apply(t,e||[])).next())}))},Ce=function(){function t(){o(this,t),this.useBlendModes=!0,this.particleCount=0,this.emitterCount=0,this.effectSequenceCount=0,this.maxParticles=5e3,this.particleFac=1,this._active=!1,this._effects=new Zt,this.__containers={},this.clearCache(),this.start()}return u(t,[{key:"start",value:function(){this._active=!0,this._timeElapsed=Date.now()}},{key:"pause",value:function(){this._active=!1}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.active){var e=Date.now(),n=.001*(e-this._timeElapsed);n*=t;for(var i,r=this._effects.first;r;)i=r.next,r.update(n),r=i;this._timeElapsed=e}}},{key:"clearCache",value:function(){this._cache={particles:[],mcs:[],sprites:[],effectSequences:[],emitters:[],cores:{}},this._settingsCache={mcs:{},sprites:{},emitters:{},effectSequences:{}},this._nameMaps={emitters:{},effectSequences:{}}}},{key:"setFloorY",value:function(t){var e=this._settingsCache.emitters;for(var n in e)e[n].floorY=t}},{key:"dispose",value:function(){for(var t=this._effects,e=t.first;e;)e.dispose(),e=e.next;t.clear(),this.clearCache()}},{key:"loadBundleFiles",value:function(t,e){var n=this,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return new Promise((function(a,s){return ke(n,void 0,void 0,g.mark((function n(){var s,o,c;return g.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:for(o in s={rfx_spritesheet:e,rfx_bundleSettings:t},i)s[o]=i[o];return r.Assets.addBundle("rfx_assets",s),n.next=5,r.Assets.loadBundle("rfx_assets");case 5:c=n.sent,a(this.initBundle(c.rfx_bundleSettings));case 7:case"end":return n.stop()}}),n,this)})))}))}},{key:"initBundle",value:function(e,n){if(e.__h!==t._bundleHash)throw new Error("Invalid settings file.");if(e.__v!=t.settingsVersion)throw new Error("Settings version mismatch.");for(var i in Se.sanitizeBundle(e),n&&this.clearCache(),e.emitters){var r=e.emitters[i];this.addParticleEmitter(r.id,r)}for(var a in e.sequences){var s=e.sequences[a];this.addEffectSequence(s.id,s)}return this.useBlendModes=e.useBlendModes,this.maxParticles=e.maxParticles,this.parseTextureCache(e.spritesheetFilter)}},{key:"addParticleEmitter",value:function(t,e){if(this._settingsCache.emitters[t])throw new Error("ComponentId '".concat(t,"' already exists."));return this._settingsCache.emitters[t]=e,this._nameMaps.emitters[e.name]=e,this}},{key:"addEffectSequence",value:function(t,e){if(this._settingsCache.effectSequences[t])throw new Error("ComponentId '".concat(t,"' already exists."));return this._settingsCache.effectSequences[t]=e,this._nameMaps.effectSequences[e.name]=e,this}},{key:"initSprite",value:function(t,e){if(this._settingsCache.sprites[t])throw new Error("ComponentId '".concat(t,"' already exists."));return this._settingsCache.sprites[t]=e,this}},{key:"initMovieClip",value:function(t,e){if(this._settingsCache.mcs[t])throw new Error("ComponentId '".concat(t,"' already exists."));return this._settingsCache.mcs[t]=e,this}},{key:"getMovieClips",value:function(){return this._settingsCache.mcs}},{key:"getSprites",value:function(){return this._settingsCache.sprites}},{key:"addContainer",value:function(t,e){this.__containers[t]=e}},{key:"getEffectSequence",value:function(t){var e=this._nameMaps.effectSequences[t];if(!e)throw new Error("Settings not defined for '".concat(t,"'"));return this.getEffectSequenceById(e.id)}},{key:"getEffectSequenceById",value:function(t){var e,n=this._cache.effectSequences,i=this._settingsCache.effectSequences[t];if(!i)throw new Error("Settings not defined for '".concat(t,"'"));return 0==n.length?(e=new ue(t)).__fx=this:e=n.pop(),e.__applySettings(i),e}},{key:"getParticleEmitter",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this._nameMaps.emitters[t];if(!i)throw new Error("Settings not defined for '".concat(t,"'"));return this.getParticleEmitterById(i.id,e,n)}},{key:"getParticleEmitterById",value:function(t){var e,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this._cache.emitters,a=this._settingsCache.emitters[t];if(!a)throw new Error("Settings not defined for '".concat(t,"'"));return 0==r.length?(e=new te(t)).__fx=this:e=r.pop(),i&&(a=JSON.parse(JSON.stringify(a))),e.autoRecycleOnComplete=n,e.__applySettings(a),e}},{key:"stopEmitter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.list===this._effects&&this._effects.remove(t),e?t.dispose():this.__recycleEmitter(t)}},{key:"stopAllEffects",value:function(){var t,e=Ee(this._effects.toArray());try{for(e.s();!(t=e.n()).done;){t.value.recycle()}}catch(t){e.e(t)}finally{e.f()}}},{key:"parseSpriteSheet",value:function(t,e){return this.parseObject(t.data.frames,e)}},{key:"parseTextureCache",value:function(t){return void 0!==Xt?this.parseObject(Xt,t):this.parseObject(r.Cache._cache,t)}},{key:"active",get:function(){return this._active}},{key:"__addActiveEffect",value:function(t){this._effects.add(t)}},{key:"__removeActiveEffect",value:function(t){this._effects.remove(t)}},{key:"__getSprite",value:function(t){var e=this._cache.sprites,n=e[t];if(null==e[t]&&(n=e[t]=[]),0==n.length){var i=this._settingsCache.sprites[t];if(null==i)throw new Error("Settings not defined for '".concat(t,"'"));var r=new pe(t,i.texture,i.anchorX,i.anchorY);return r.__fx=this,r}return n.pop()}},{key:"__getMovieClip",value:function(t){var e=this._cache.mcs,n=e[t];if(null==e[t]&&(n=e[t]=[]),0==n.length){var i=this._settingsCache.mcs[t];if(null==i)throw new Error("Settings not defined for '".concat(t,"'"));var r=new ge(t,i.textures,i.anchorX,i.anchorY);return r.__fx=this,r}return n.pop()}},{key:"__getParticle",value:function(){var t=this._cache.particles;if(0==t.length){var e=new ye;return e.__fx=this,e}return t.pop()}},{key:"__getEmitterCore",value:function(e,n){var i=this._cache.cores,r=i[e];return null==r&&(r=i[e]=[]),0==r.length?new t.__emitterCores[e](e):r.pop()}},{key:"__recycleParticle",value:function(t){this._cache.particles.push(t)}},{key:"__recycleSprite",value:function(t,e){this._cache.sprites[t].push(e)}},{key:"__recycleMovieClip",value:function(t,e){this._cache.mcs[t].push(e)}},{key:"__recycleEmitter",value:function(t){this._effects.remove(t),this.__recycleEmitterCore(t.core),this._cache.emitters.push(t)}},{key:"__recycleEffectSequence",value:function(t){this._effects.remove(t),this._cache.effectSequences.push(t)}},{key:"__recycleEmitterCore",value:function(t){this._cache.cores[t.type].push(t)}},{key:"parseObject",value:function(t,e){var n;if(t instanceof Map){n=new Map;var i=t;i.values();var a,o=Ee(i);try{for(o.s();!(a=o.n()).done;){var c=s(a.value,2),l=c[0],h=c[1];h instanceof r.Texture&&(n[l]=h)}}catch(t){o.e(t)}finally{o.f()}}else n=t;var u={},f={sprites:[],movieClips:[]};for(var p in n)if((!e||-1!=p.indexOf(e))&&(this.initSprite(p,{texture:p,anchorX:.5,anchorY:.5}),f.sprites.push(p),"mc_"==p.substr(0,3))){var d=p.split("_")[1];null==u[d]&&(u[d]=[]),u[d].push(p)}for(var _ in u){var v=u[_];f.movieClips.push(_),this.initMovieClip(_,{textures:v,anchorX:.5,anchorY:.5})}return f}}]),t}();return Ce.settingsVersion=0,Ce.version="1.3.0",Ce._bundleHash="80c6df7fb0d3d898f34ce0031c037fef",Ce.ComponentType=t.ComponentType,Ce.EffectSequenceComponentType=t.EffectSequenceComponentType,Ce.__emitterCores={circle:se,box:le,ring:re},t.BaseEffect=Qt,t.BaseEmitterCore=ne,t.BoxEmitterCore=le,t.CircleEmitterCore=se,t.Color=de,t.Easing=_e,t.EffectSequence=ue,t.FX=Ce,t.FXSignal=Jt,t.LinkedList=Zt,t.MovieClip=ge,t.Particle=ye,t.ParticleEmitter=te,t.RingEmitterCore=re,t.Rnd=$t,t.Sprite=pe,t}({},0,PIXI);
